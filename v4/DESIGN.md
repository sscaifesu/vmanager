# vmanager v4.0.0 è®¾è®¡æ–‡æ¡£

## æ ¸å¿ƒç‰¹æ€§

### 1. åŒæ¨¡å¼ç•Œé¢
- **TUI æ¨¡å¼** (é»˜è®¤): ä½¿ç”¨ ncurses çš„äº¤äº’å¼ç•Œé¢
- **CLI æ¨¡å¼**: ä¼ ç»Ÿå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆå…¼å®¹ v3ï¼‰

### 2. ç§‘å­¦çš„ JSON è§£æ
- ä½¿ç”¨ cJSON åº“
- ç¨³å®šã€å¯é ã€æ˜“ç»´æŠ¤

### 3. å¢å¼ºåŠŸèƒ½
- å®æ—¶ç›‘æ§ VM çŠ¶æ€
- æ‰¹é‡æ“ä½œæ”¯æŒ
- é…ç½®æ–‡ä»¶ç®¡ç†
- æ—¥å¿—è®°å½•
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

## æ¶æ„è®¾è®¡

```
vmanager v4
â”œâ”€â”€ core/           # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ api.c       # Proxmox API å°è£…
â”‚   â”œâ”€â”€ config.c    # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ vm.c        # VM æ“ä½œ
â”œâ”€â”€ ui/             # ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ tui.c       # TUI ç•Œé¢ (ncurses)
â”‚   â””â”€â”€ cli.c       # CLI ç•Œé¢
â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ json.c      # JSON è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ logger.c    # æ—¥å¿—ç³»ç»Ÿ
â””â”€â”€ main.c          # ä¸»ç¨‹åº
```

## TUI ç•Œé¢è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ vmanager v4.0.0 - Proxmox VM Manager          [F1] Help [Q] Quitâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VMID  Name              Status    CPU%  Mem(GB)  Disk(GB)  IP   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 111   srv-web-25c201    running   2.1   4.0      2.2       10..â”‚
â”‚ 112   srv-web-25c202    running   1.8   4.0      2.2       10..â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [S]tart [T]op [R]estart [P]ause [D]estroy [Enter]Details       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åŠŸèƒ½åˆ—è¡¨

### åŸºç¡€åŠŸèƒ½ (v3 å…¼å®¹)
- âœ… list - åˆ—å‡ºæ‰€æœ‰ VM
- âœ… status - æŸ¥çœ‹ VM çŠ¶æ€
- âœ… start/stop/restart - æ§åˆ¶ VM
- âœ… suspend/resume - æš‚åœ/æ¢å¤
- âœ… destroy - åˆ é™¤ VM

### æ–°å¢åŠŸèƒ½
- ğŸ†• monitor - å®æ—¶ç›‘æ§æ¨¡å¼
- ğŸ†• clone - å…‹éš† VM
- ğŸ†• snapshot - å¿«ç…§ç®¡ç†
- ğŸ†• backup - å¤‡ä»½ç®¡ç†
- ğŸ†• migrate - è¿ç§» VM
- ğŸ†• resize - è°ƒæ•´èµ„æº
- ğŸ†• console - è¿æ¥æ§åˆ¶å°

## æŠ€æœ¯æ ˆ

- **è¯­è¨€**: C11
- **JSON**: cJSON
- **TUI**: ncurses
- **æ„å»º**: Makefile
- **å¹³å°**: Linux (macOS, PVE)

## å¼€å‘é˜¶æ®µ

### Phase 1: æ ¸å¿ƒæ¡†æ¶ (å½“å‰)
- cJSON é›†æˆ
- API å°è£…
- åŸºç¡€ CLI åŠŸèƒ½

### Phase 2: TUI ç•Œé¢
- ncurses é›†æˆ
- äº¤äº’å¼ç•Œé¢
- é”®ç›˜å¯¼èˆª

### Phase 3: é«˜çº§åŠŸèƒ½
- å®æ—¶ç›‘æ§
- å¿«ç…§ç®¡ç†
- å¤‡ä»½åŠŸèƒ½

### Phase 4: ä¼˜åŒ–å’Œæµ‹è¯•
- æ€§èƒ½ä¼˜åŒ–
- é”™è¯¯å¤„ç†
- å®Œæ•´æµ‹è¯•

## é…ç½®æ–‡ä»¶æ ¼å¼

```ini
[server]
host = 10.10.10.4
port = 8006
node = pve
verify_ssl = false

[auth]
token_id = root@pam!vmanager
token_secret = xxx

[ui]
default_mode = tui
refresh_interval = 5
color_scheme = default

[logging]
enabled = true
level = info
file = ~/.vmanager.log
```

## å‘½ä»¤è¡Œå‚æ•°

```bash
vmanager [OPTIONS] [COMMAND] [ARGS...]

OPTIONS:
  --tui              å¯åŠ¨ TUI æ¨¡å¼ (é»˜è®¤)
  --cli              ä½¿ç”¨ CLI æ¨¡å¼
  --config FILE      æŒ‡å®šé…ç½®æ–‡ä»¶
  --mode MODE        å¼ºåˆ¶æ¨¡å¼ (local/remote)
  -v, --verbose      è¯¦ç»†è¾“å‡º
  -q, --quiet        é™é»˜æ¨¡å¼
  -h, --help         å¸®åŠ©ä¿¡æ¯
  --version          ç‰ˆæœ¬ä¿¡æ¯

COMMANDS:
  list               åˆ—å‡ºæ‰€æœ‰ VM
  status VMID        æŸ¥çœ‹ VM çŠ¶æ€
  start VMID         å¯åŠ¨ VM
  stop VMID          åœæ­¢ VM
  restart VMID       é‡å¯ VM
  monitor            å¯åŠ¨ç›‘æ§æ¨¡å¼
  clone VMID NEWID   å…‹éš† VM
  snapshot           å¿«ç…§ç®¡ç†
```

## ä¾èµ–

```bash
# Ubuntu/Debian
apt-get install libncurses5-dev

# macOS
brew install ncurses

# ç¼–è¯‘
make
make install
```
